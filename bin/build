#!/bin/bash
#
# build - simple command line build script
#

cd ~/workspace/Core3/MMOCoreORB
#export CLASSPATH=~/workspace/Core3/MMOEngine/bin/idlc.jar

EXTRA=$1

# Just in case they've not ran config yet
# TODO add check to see if config.log has changed
if [ ! -f build/unix/CMakeFiles/CMakeOutout.log ]; then
  EXTRA='config'
fi

case $EXTRA in
  config ) make config; make clean ;;
  clean ) make clean ;;
  ninja ) make build-ninja ;;  
esac

# Always run build
if make -k ; then
  echo "** BUILD SUCCESS IN $SECONDS SECOND(S) **"
  exit 0
fi

# opps.
echo "** BUILD FAILED **"
exit 1
